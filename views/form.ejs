<html>
<head>
 <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Insert</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
	
	<link rel="stylesheet" type="text/css" href="styles/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="styles/style.css">
	
	
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    
    <!-- Angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script>
var app = angular.module('paitentsApp', []);
app.filter('ageFilter', function() {
     function calculateAge(birthday) { // birthday is a date
         var ageDifMs = Date.now() - birthday.getTime();
         var ageDate = new Date(ageDifMs); // miliseconds from epoch
         return Math.abs(ageDate.getUTCFullYear() - 1970);
     }

     return function(birthdate) { 
           if(birthdate){
				return calculateAge(birthdate);
			}
			else{
				return "";
			}
		   
     }; 
});
</script>
<script>
$(function(){
    var Today = new Date();

    var month = Today.getMonth() + 1;
    var day = Today.getDate();
    var year = Today.getFullYear();

    if(month < 10)
        month = '0' + month.toString();
    if(day < 10)
        day = '0' + day.toString();

    var maxDate = year + '-' + month + '-' + day;    
    $('#dob').attr('max', maxDate);
});
</script>
</head>
<body style="margin-top: 50px;" ng-app="paitentsApp">
<header><!--start header-->
		
		<nav class="navbar navbar-fixed-top" style="background:#3c465a;"><!--start nav-->
			
			<div class="container">
				
				<div class="navbar-header">
					
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
					</button>

				</div>

				<div class="collapse navbar-collapse" id="myNavbar">
					<ul class="nav navbar-nav navbar-right">
						<li><a href="/"><span></span>Add patient</a></li>
						<li><a href="/search"><span></span>Search patient</a></li>
					</ul>				
				</div>

			</div>

		</nav><!--end nav-->

	</header><!--end header-->
	<div class="container"><!--start container-->	

		<div class="row"><!--start row-->

			<div class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4">

				<div class="card card-1">
					
					<form action="/" method="POST" name="paitentForm" id="paitentForm">
						<h4>Add paitient information</h4>
					
						<div class="form-group">
							<input type="text" ng-pattern="/^[a-zA-Z]*$/" ng-maxlength="50"  name="firstname" placeholder="*Firstname" ng-model="firstname" class="form-control" required/>
							<p ng-show="paitentForm.firstname.$error.pattern || paitentForm.firstname === undefined" class="help-block">Number/Space/Special characters are not allowed for firstname</p>
							<p ng-show="paitentForm.firstname.$error.maxlength || paitentForm.firstname === undefined" class="help-block">Maxlength for this firstname is 50</p>
						</div>
			
						<div class="form-group">
							<input type="text" name="lastname"  ng-pattern="/^[a-zA-Z]*$/"  ng-maxlength="50" placeholder="*Lastname" ng-model="lastname" class="form-control" required>
							<p ng-show="paitentForm.lastname.$error.pattern || paitentForm.lastname === undefined" class="help-block">Number/Space/Special characters are not allowed for lastname</p>
							<p ng-show="paitentForm.lastname.$error.maxlength || paitentForm.lastname === undefined" class="help-block">Maxlength for this lastname is 50</p>
						</div>
						<div class="form-group">
							<Select name="gender" class="form-control" required>
								<option value="Male">Male</option>
								<option value="Female">Female</option>
							</select>
						</div>
						<div class="form-group">
							<input type="date" id="dob" name="dob" ng-model="dob" placeholder="Date of birth" class="form-control" required>
						</div>
						<div class="form-group">
							<input type="text" pattern="/^[0-9]*$/" id="age" value="{{ dob | ageFilter }}" min="0" max="200" name="age" placeholder="Age" class="form-control" required>
							
						</div>
						<div class="form-group">
							<input type="text" ng-pattern="/^[0-9]*$/" name="phone" ng-maxlength="10" ng-maxlength="10" ng-model="phone" placeholder="*Phone" class="form-control" required>						
							<p ng-show="paitentForm.phone.$error.pattern || paitentForm.phone === undefined" class="help-block">Number/Space/Special characters are not allowed for lastname</p>
							<p ng-show="paitentForm.phone.$error.minlength || paitentForm.phone === undefined" class="help-block">Length of phone number has to be 10 {format: 8870563070} </p>
							<p ng-show="paitentForm.phone.$error.maxlength || paitentForm.phone === undefined" class="help-block">Length of phone number has to be 10 {format: 8870563070} </p>
						</div>
						<div class="form-group">			
							<Textarea class="form-textarea" maxlength="512" ng-model="other" name="other" cols="2" rows="2" placeholder="others"></Textarea>
						</div>
						<div class="form-group">
							<input type="submit" name="submit" value="Submit" class="btn btn-primary" ng-disabled="paitentForm.$invalid"/>
						</div>
					</form>
			
				</div>
			</div>
		</div>
	</div>
</body>
</html>